<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: components/MoveableWrapper.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: components/MoveableWrapper.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { useRef, useEffect, useState } from 'react';
import Moveable from 'react-moveable';

/**
 * MoveableWrapper Component
 *
 * Componente que envuelve elementos SVG con react-moveable para proporcionar
 * capacidades de transformación visual: arrastrar, escalar, rotar.
 *
 * Características:
 * - Draggable: Arrastrar elementos
 * - Resizable: Redimensionar con handles
 * - Rotatable: Rotar elementos
 * - Snappable: Snap a grid, guías y otros elementos
 * - Groupable: Selección múltiple (futuro)
 */
export const MoveableWrapper = ({
  target,
  container,
  onDragStart,
  onDrag,
  onDragEnd,
  onResizeStart,
  onResize,
  onResizeEnd,
  onRotateStart,
  onRotate,
  onRotateEnd,
  bounds,
  snapThreshold = 5,
  snapGap = 10,
  isDisplayObjectSnapBound = true,
  isDisplaySnapDigit = true,
  snapDigit = 0,
  draggable = true,
  resizable = true,
  rotatable = true,
  snappable = true,
  keepRatio = false,
  throttleDrag = 0,
  throttleResize = 0,
  throttleRotate = 0,
  renderDirections = ['nw', 'n', 'ne', 'w', 'e', 'sw', 's', 'se'],
  edge = false,
  zoom = 1,
  origin = true,
  padding = { left: 0, top: 0, right: 0, bottom: 0 },
}) => {
  const moveableRef = useRef(null);
  const [guidelines, setGuidelines] = useState([]);

  /**
   * Genera guías horizontales y verticales para snapping
   */
  useEffect(() => {
    if (!container || !snappable) return;

    const containerRect = container.getBoundingClientRect();
    const horizontalGuidelines = [];
    const verticalGuidelines = [];

    // Guías en el centro del contenedor
    horizontalGuidelines.push(containerRect.height / 2);
    verticalGuidelines.push(containerRect.width / 2);

    // Guías en los bordes del contenedor
    horizontalGuidelines.push(0, containerRect.height);
    verticalGuidelines.push(0, containerRect.width);

    // Grid guides cada 50px (opcional)
    if (snapGap > 0) {
      for (let i = snapGap; i &lt; containerRect.width; i += snapGap) {
        verticalGuidelines.push(i);
      }
      for (let i = snapGap; i &lt; containerRect.height; i += snapGap) {
        horizontalGuidelines.push(i);
      }
    }

    setGuidelines({
      horizontal: horizontalGuidelines,
      vertical: verticalGuidelines,
    });
  }, [container, snappable, snapGap]);

  /**
   * Encuentra elementos hermanos para snapping
   */
  const getElementGuidelines = () => {
    if (!container || !target) return [];

    const elements = [];
    const containerChildren = Array.from(container.querySelectorAll('*'));

    containerChildren.forEach((el) => {
      // Skip el elemento actual y sus padres/hijos
      if (el === target || el.contains(target) || target.contains(el)) {
        return;
      }

      // Solo elementos visibles con dimensiones
      const rect = el.getBoundingClientRect();
      if (rect.width > 0 &amp;&amp; rect.height > 0) {
        elements.push(el);
      }
    });

    return elements;
  };

  if (!target) {
    return null;
  }

  return (
    &lt;Moveable
      ref={moveableRef}
      target={target}
      container={container}
      // Draggable
      draggable={draggable}
      throttleDrag={throttleDrag}
      onDragStart={onDragStart}
      onDrag={onDrag}
      onDragEnd={onDragEnd}
      // Resizable
      resizable={resizable}
      keepRatio={keepRatio}
      throttleResize={throttleResize}
      renderDirections={renderDirections}
      edge={edge}
      onResizeStart={onResizeStart}
      onResize={onResize}
      onResizeEnd={onResizeEnd}
      // Rotatable
      rotatable={rotatable}
      throttleRotate={throttleRotate}
      onRotateStart={onRotateStart}
      onRotate={onRotate}
      onRotateEnd={onRotateEnd}
      // Snappable
      snappable={snappable}
      snapThreshold={snapThreshold}
      isDisplaySnapDigit={isDisplaySnapDigit}
      isDisplayInnerSnapDigit={isDisplaySnapDigit}
      isDisplayObjectSnapBound={isDisplayObjectSnapBound}
      snapDigit={snapDigit}
      snapGap={snapGap}
      horizontalGuidelines={guidelines.horizontal}
      verticalGuidelines={guidelines.vertical}
      elementGuidelines={snappable ? getElementGuidelines() : []}
      // Configuración visual
      origin={origin}
      zoom={zoom}
      padding={padding}
      bounds={bounds}
      // Estilos personalizados
      className="moveable-control-box"
    />
  );
};

export default MoveableWrapper;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="CoordinateTransformer.html">CoordinateTransformer</a></li><li><a href="PathDataProcessor.html">PathDataProcessor</a></li><li><a href="SVGOptimizer.html">SVGOptimizer</a></li><li><a href="SVGWorld.html">SVGWorld</a></li></ul><h3>Global</h3><ul><li><a href="global.html#AdvancedTools">AdvancedTools</a></li><li><a href="global.html#BezierHandleEditor">BezierHandleEditor</a></li><li><a href="global.html#CodeView">CodeView</a></li><li><a href="global.html#Container">Container</a></li><li><a href="global.html#DEFAULT_CONFIG">DEFAULT_CONFIG</a></li><li><a href="global.html#FileLoadDemo">FileLoadDemo</a></li><li><a href="global.html#LanguageSelector">LanguageSelector</a></li><li><a href="global.html#MousePointerIcon">MousePointerIcon</a></li><li><a href="global.html#MoveableWrapper">MoveableWrapper</a></li><li><a href="global.html#NodeEditor">NodeEditor</a></li><li><a href="global.html#PathDebugger">PathDebugger</a></li><li><a href="global.html#PerformanceMetrics">PerformanceMetrics</a></li><li><a href="global.html#SVGHierarchy">SVGHierarchy</a></li><li><a href="global.html#SVGHistory">SVGHistory</a></li><li><a href="global.html#SVGMetadataEditor">SVGMetadataEditor</a></li><li><a href="global.html#SVGViewer">SVGViewer</a></li><li><a href="global.html#SettingsModal">SettingsModal</a></li><li><a href="global.html#SettingsView">SettingsView</a></li><li><a href="global.html#StylePanel">StylePanel</a></li><li><a href="global.html#TextInput">TextInput</a></li><li><a href="global.html#absoluteToRelative">absoluteToRelative</a></li><li><a href="global.html#addNodeToPath">addNodeToPath</a></li><li><a href="global.html#applyTransform">applyTransform</a></li><li><a href="global.html#buildPathFromNodes">buildPathFromNodes</a></li><li><a href="global.html#buildPathString">buildPathString</a></li><li><a href="global.html#checkLocalStorageAvailable">checkLocalStorageAvailable</a></li><li><a href="global.html#checkSessionStorageAvailable">checkSessionStorageAvailable</a></li><li><a href="global.html#circleToPath">circleToPath</a></li><li><a href="global.html#clearLocalStorage">clearLocalStorage</a></li><li><a href="global.html#clearSessionStorage">clearSessionStorage</a></li><li><a href="global.html#closePath">closePath</a></li><li><a href="global.html#countElements">countElements</a></li><li><a href="global.html#createCoordinateTransformer">createCoordinateTransformer</a></li><li><a href="global.html#createPathDataProcessor">createPathDataProcessor</a></li><li><a href="global.html#createSVGOptimizer">createSVGOptimizer</a></li><li><a href="global.html#createSVGWorld">createSVGWorld</a></li><li><a href="global.html#ellipseToPath">ellipseToPath</a></li><li><a href="global.html#formatNumber">formatNumber</a></li><li><a href="global.html#getElementBBox">getElementBBox</a></li><li><a href="global.html#getLocalStorageSize">getLocalStorageSize</a></li><li><a href="global.html#getSessionStorageSize">getSessionStorageSize</a></li><li><a href="global.html#getTransformedBBox">getTransformedBBox</a></li><li><a href="global.html#moveElement">moveElement</a></li><li><a href="global.html#optimizeSVG">optimizeSVG</a></li><li><a href="global.html#parsePathCommand">parsePathCommand</a></li><li><a href="global.html#parsePathNodes">parsePathNodes</a></li><li><a href="global.html#parseTransform">parseTransform</a></li><li><a href="global.html#pointToHorizontalLine">pointToHorizontalLine</a></li><li><a href="global.html#pointToLineTo">pointToLineTo</a></li><li><a href="global.html#pointToMoveTo">pointToMoveTo</a></li><li><a href="global.html#pointToSmoothQuadraticBezier">pointToSmoothQuadraticBezier</a></li><li><a href="global.html#pointToVerticalLine">pointToVerticalLine</a></li><li><a href="global.html#pointsToArc">pointsToArc</a></li><li><a href="global.html#pointsToCubicBezier">pointsToCubicBezier</a></li><li><a href="global.html#pointsToPath">pointsToPath</a></li><li><a href="global.html#pointsToQuadraticBezier">pointsToQuadraticBezier</a></li><li><a href="global.html#pointsToSmoothCubicBezier">pointsToSmoothCubicBezier</a></li><li><a href="global.html#rectToPath">rectToPath</a></li><li><a href="global.html#relativeToAbsolute">relativeToAbsolute</a></li><li><a href="global.html#removeNodeFromPath">removeNodeFromPath</a></li><li><a href="global.html#rotateElement">rotateElement</a></li><li><a href="global.html#scaleElement">scaleElement</a></li><li><a href="global.html#serializeTransform">serializeTransform</a></li><li><a href="global.html#simplifyPath">simplifyPath</a></li><li><a href="global.html#svgToScreenCoords">svgToScreenCoords</a></li><li><a href="global.html#updateNodeInPath">updateNodeInPath</a></li><li><a href="global.html#useCoordinateTransformer">useCoordinateTransformer</a></li><li><a href="global.html#useHistory">useHistory</a></li><li><a href="global.html#useLocalStorage">useLocalStorage</a></li><li><a href="global.html#useMoveable">useMoveable</a></li><li><a href="global.html#usePanzoom">usePanzoom</a></li><li><a href="global.html#usePathDataProcessor">usePathDataProcessor</a></li><li><a href="global.html#usePerformance">usePerformance</a></li><li><a href="global.html#useSVGParser">useSVGParser</a></li><li><a href="global.html#useSVGStorage">useSVGStorage</a></li><li><a href="global.html#useSVGWorld">useSVGWorld</a></li><li><a href="global.html#useSessionStorage">useSessionStorage</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.5</a> on Mon Nov 17 2025 13:59:29 GMT+1300 (New Zealand Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
