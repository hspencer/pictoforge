<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: components/SVGMetadataEditor.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: components/SVGMetadataEditor.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { useState, useEffect } from 'react';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Label } from '@/components/ui/label';
import { Textarea } from '@/components/ui/textarea';
import { Info, Save } from 'lucide-react';

/**
 * SVGMetadataEditor Component
 *
 * Componente para editar metadatos de accesibilidad del SVG:
 * - &lt;title>: Título descriptivo del SVG
 * - &lt;desc>: Descripción detallada del contenido
 * - lang: Atributo de idioma
 * - role: Rol ARIA
 *
 * Sigue estándares WAI-ARIA para mejorar la accesibilidad
 */
export const SVGMetadataEditor = ({ svgContent, onUpdate }) => {
  const [metadata, setMetadata] = useState({
    title: '',
    desc: '',
    lang: 'en',
    role: 'img',
  });

  const [hasChanges, setHasChanges] = useState(false);

  /**
   * Extraer metadatos existentes del SVG
   */
  useEffect(() => {
    if (!svgContent) return;

    try {
      const parser = new DOMParser();
      const doc = parser.parseFromString(svgContent, 'image/svg+xml');
      const svg = doc.documentElement;

      const title = svg.querySelector('title')?.textContent || '';
      const desc = svg.querySelector('desc')?.textContent || '';
      const lang = svg.getAttribute('lang') || 'en';
      const role = svg.getAttribute('role') || 'img';

      setMetadata({ title, desc, lang, role });
      setHasChanges(false);
    } catch (error) {
      console.error('❌ Error al parsear SVG:', error);
    }
  }, [svgContent]);

  /**
   * Actualizar metadatos en el SVG
   */
  const handleSave = () => {
    if (!svgContent || !onUpdate) return;

    try {
      const parser = new DOMParser();
      const doc = parser.parseFromString(svgContent, 'image/svg+xml');
      const svg = doc.documentElement;

      // Actualizar o crear &lt;title>
      let titleElement = svg.querySelector('title');
      if (metadata.title) {
        if (!titleElement) {
          titleElement = doc.createElementNS('http://www.w3.org/2000/svg', 'title');
          svg.insertBefore(titleElement, svg.firstChild);
        }
        titleElement.textContent = metadata.title;

        // Añadir ID y aria-labelledby
        const titleId = titleElement.getAttribute('id') || `svg-title-${Date.now()}`;
        titleElement.setAttribute('id', titleId);
        svg.setAttribute('aria-labelledby', titleId);
      } else if (titleElement) {
        // Remover si está vacío
        titleElement.remove();
        svg.removeAttribute('aria-labelledby');
      }

      // Actualizar o crear &lt;desc>
      let descElement = svg.querySelector('desc');
      if (metadata.desc) {
        if (!descElement) {
          descElement = doc.createElementNS('http://www.w3.org/2000/svg', 'desc');
          const titleElement = svg.querySelector('title');
          if (titleElement) {
            titleElement.after(descElement);
          } else {
            svg.insertBefore(descElement, svg.firstChild);
          }
        }
        descElement.textContent = metadata.desc;

        // Añadir ID y aria-describedby
        const descId = descElement.getAttribute('id') || `svg-desc-${Date.now()}`;
        descElement.setAttribute('id', descId);

        // Combinar con aria-labelledby si existe
        const labelledBy = svg.getAttribute('aria-labelledby');
        if (labelledBy) {
          svg.setAttribute('aria-labelledby', `${labelledBy} ${descId}`);
        } else {
          svg.setAttribute('aria-describedby', descId);
        }
      } else if (descElement) {
        // Remover si está vacío
        descElement.remove();
        svg.removeAttribute('aria-describedby');
      }

      // Actualizar atributos
      svg.setAttribute('lang', metadata.lang);
      svg.setAttribute('role', metadata.role);

      // Serializar y notificar
      const serializer = new XMLSerializer();
      const newSvgContent = serializer.serializeToString(svg);

      onUpdate(newSvgContent);
      setHasChanges(false);

      console.log('✅ Metadatos de accesibilidad actualizados:', metadata);
    } catch (error) {
      console.error('❌ Error al actualizar metadatos:', error);
    }
  };

  /**
   * Manejar cambios en inputs
   */
  const handleChange = (field, value) => {
    setMetadata((prev) => ({ ...prev, [field]: value }));
    setHasChanges(true);
  };

  return (
    &lt;div className="p-4 bg-muted/20 rounded-lg border space-y-4">
      {/* Header */}
      &lt;div className="flex items-center justify-between">
        &lt;div className="flex items-center gap-2">
          &lt;Info size={16} className="text-primary" />
          &lt;h3 className="text-sm font-semibold">Metadatos de Accesibilidad&lt;/h3>
        &lt;/div>
        {hasChanges &amp;&amp; (
          &lt;Button
            variant="default"
            size="sm"
            onClick={handleSave}
            className="h-7 gap-1"
          >
            &lt;Save size={14} />
            Guardar
          &lt;/Button>
        )}
      &lt;/div>

      {/* Info */}
      &lt;div className="text-xs text-muted-foreground bg-muted/30 p-2 rounded">
        Los metadatos mejoran la accesibilidad del SVG para lectores de pantalla
        y herramientas de asistencia siguiendo estándares WAI-ARIA.
      &lt;/div>

      {/* Title */}
      &lt;div className="space-y-2">
        &lt;Label htmlFor="svg-title" className="text-xs">
          Título (title)
        &lt;/Label>
        &lt;Input
          id="svg-title"
          placeholder="Ej: Icono de usuario"
          value={metadata.title}
          onChange={(e) => handleChange('title', e.target.value)}
          className="h-8 text-xs"
        />
        &lt;p className="text-xs text-muted-foreground">
          Título descriptivo corto del SVG
        &lt;/p>
      &lt;/div>

      {/* Description */}
      &lt;div className="space-y-2">
        &lt;Label htmlFor="svg-desc" className="text-xs">
          Descripción (desc)
        &lt;/Label>
        &lt;Textarea
          id="svg-desc"
          placeholder="Ej: Ilustración de una persona haciendo la cama con sábanas azules"
          value={metadata.desc}
          onChange={(e) => handleChange('desc', e.target.value)}
          className="min-h-[60px] text-xs resize-none"
        />
        &lt;p className="text-xs text-muted-foreground">
          Descripción detallada del contenido visual
        &lt;/p>
      &lt;/div>

      {/* Language */}
      &lt;div className="space-y-2">
        &lt;Label htmlFor="svg-lang" className="text-xs">
          Idioma (lang)
        &lt;/Label>
        &lt;Input
          id="svg-lang"
          placeholder="en, es, fr..."
          value={metadata.lang}
          onChange={(e) => handleChange('lang', e.target.value)}
          className="h-8 text-xs"
          maxLength={5}
        />
        &lt;p className="text-xs text-muted-foreground">
          Código de idioma ISO 639-1 (ej: en, es, fr)
        &lt;/p>
      &lt;/div>

      {/* Role */}
      &lt;div className="space-y-2">
        &lt;Label htmlFor="svg-role" className="text-xs">
          Rol ARIA (role)
        &lt;/Label>
        &lt;select
          id="svg-role"
          value={metadata.role}
          onChange={(e) => handleChange('role', e.target.value)}
          className="w-full h-8 text-xs border rounded-md px-2 bg-background"
        >
          &lt;option value="img">img (imagen)&lt;/option>
          &lt;option value="presentation">presentation (decorativo)&lt;/option>
          &lt;option value="graphics-document">graphics-document&lt;/option>
          &lt;option value="graphics-symbol">graphics-symbol&lt;/option>
        &lt;/select>
        &lt;p className="text-xs text-muted-foreground">
          Define cómo los lectores de pantalla interpretan el SVG
        &lt;/p>
      &lt;/div>

      {/* Estándares WAI-ARIA */}
      &lt;div className="space-y-2">
        &lt;div className="text-xs font-semibold text-muted-foreground">
          Cumplimiento WAI-ARIA
        &lt;/div>
        &lt;div className="space-y-1 text-xs">
          &lt;div className="flex items-center gap-2">
            &lt;span className={metadata.title ? 'text-green-600' : 'text-yellow-600'}>
              {metadata.title ? '✓' : '⚠'}
            &lt;/span>
            &lt;span>
              {metadata.title
                ? 'Título definido (aria-labelledby)'
                : 'Sin título (recomendado)'}
            &lt;/span>
          &lt;/div>
          &lt;div className="flex items-center gap-2">
            &lt;span className={metadata.desc ? 'text-green-600' : 'text-gray-500'}>
              {metadata.desc ? '✓' : '○'}
            &lt;/span>
            &lt;span>
              {metadata.desc
                ? 'Descripción definida (aria-describedby)'
                : 'Sin descripción (opcional)'}
            &lt;/span>
          &lt;/div>
          &lt;div className="flex items-center gap-2">
            &lt;span className={metadata.lang ? 'text-green-600' : 'text-yellow-600'}>
              {metadata.lang ? '✓' : '⚠'}
            &lt;/span>
            &lt;span>
              {metadata.lang ? `Idioma: ${metadata.lang}` : 'Sin idioma definido'}
            &lt;/span>
          &lt;/div>
          &lt;div className="flex items-center gap-2">
            &lt;span className={metadata.role ? 'text-green-600' : 'text-yellow-600'}>
              {metadata.role ? '✓' : '⚠'}
            &lt;/span>
            &lt;span>
              {metadata.role ? `Rol: ${metadata.role}` : 'Sin rol definido'}
            &lt;/span>
          &lt;/div>
        &lt;/div>
      &lt;/div>

      {/* Ejemplo de output */}
      {(metadata.title || metadata.desc) &amp;&amp; (
        &lt;div className="space-y-2">
          &lt;div className="text-xs font-semibold text-muted-foreground">
            Código generado
          &lt;/div>
          &lt;div className="p-2 bg-background rounded border text-xs font-mono overflow-x-auto">
            &lt;pre className="whitespace-pre-wrap">
              {`&lt;svg role="${metadata.role}" lang="${metadata.lang}"${
                metadata.title ? ` aria-labelledby="svg-title-..."` : ''
              }${metadata.desc ? ` aria-describedby="svg-desc-..."` : ''}>\n`}
              {metadata.title &amp;&amp; `  &lt;title id="svg-title-...">${metadata.title}&lt;/title>\n`}
              {metadata.desc &amp;&amp; `  &lt;desc id="svg-desc-...">${metadata.desc}&lt;/desc>\n`}
              {'  &lt;!-- contenido SVG -->\n&lt;/svg>'}
            &lt;/pre>
          &lt;/div>
        &lt;/div>
      )}
    &lt;/div>
  );
};

export default SVGMetadataEditor;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="CoordinateTransformer.html">CoordinateTransformer</a></li><li><a href="PathDataProcessor.html">PathDataProcessor</a></li><li><a href="SVGOptimizer.html">SVGOptimizer</a></li><li><a href="SVGWorld.html">SVGWorld</a></li></ul><h3>Global</h3><ul><li><a href="global.html#AdvancedTools">AdvancedTools</a></li><li><a href="global.html#BezierHandleEditor">BezierHandleEditor</a></li><li><a href="global.html#CodeView">CodeView</a></li><li><a href="global.html#Container">Container</a></li><li><a href="global.html#DEFAULT_CONFIG">DEFAULT_CONFIG</a></li><li><a href="global.html#FileLoadDemo">FileLoadDemo</a></li><li><a href="global.html#LanguageSelector">LanguageSelector</a></li><li><a href="global.html#MousePointerIcon">MousePointerIcon</a></li><li><a href="global.html#MoveableWrapper">MoveableWrapper</a></li><li><a href="global.html#NodeEditor">NodeEditor</a></li><li><a href="global.html#PathDebugger">PathDebugger</a></li><li><a href="global.html#PerformanceMetrics">PerformanceMetrics</a></li><li><a href="global.html#SVGHierarchy">SVGHierarchy</a></li><li><a href="global.html#SVGHistory">SVGHistory</a></li><li><a href="global.html#SVGMetadataEditor">SVGMetadataEditor</a></li><li><a href="global.html#SVGViewer">SVGViewer</a></li><li><a href="global.html#SettingsModal">SettingsModal</a></li><li><a href="global.html#SettingsView">SettingsView</a></li><li><a href="global.html#StylePanel">StylePanel</a></li><li><a href="global.html#TextInput">TextInput</a></li><li><a href="global.html#absoluteToRelative">absoluteToRelative</a></li><li><a href="global.html#addNodeToPath">addNodeToPath</a></li><li><a href="global.html#applyTransform">applyTransform</a></li><li><a href="global.html#buildPathFromNodes">buildPathFromNodes</a></li><li><a href="global.html#buildPathString">buildPathString</a></li><li><a href="global.html#checkLocalStorageAvailable">checkLocalStorageAvailable</a></li><li><a href="global.html#checkSessionStorageAvailable">checkSessionStorageAvailable</a></li><li><a href="global.html#circleToPath">circleToPath</a></li><li><a href="global.html#clearLocalStorage">clearLocalStorage</a></li><li><a href="global.html#clearSessionStorage">clearSessionStorage</a></li><li><a href="global.html#closePath">closePath</a></li><li><a href="global.html#countElements">countElements</a></li><li><a href="global.html#createCoordinateTransformer">createCoordinateTransformer</a></li><li><a href="global.html#createPathDataProcessor">createPathDataProcessor</a></li><li><a href="global.html#createSVGOptimizer">createSVGOptimizer</a></li><li><a href="global.html#createSVGWorld">createSVGWorld</a></li><li><a href="global.html#ellipseToPath">ellipseToPath</a></li><li><a href="global.html#formatNumber">formatNumber</a></li><li><a href="global.html#getElementBBox">getElementBBox</a></li><li><a href="global.html#getLocalStorageSize">getLocalStorageSize</a></li><li><a href="global.html#getSessionStorageSize">getSessionStorageSize</a></li><li><a href="global.html#getTransformedBBox">getTransformedBBox</a></li><li><a href="global.html#moveElement">moveElement</a></li><li><a href="global.html#optimizeSVG">optimizeSVG</a></li><li><a href="global.html#parsePathCommand">parsePathCommand</a></li><li><a href="global.html#parsePathNodes">parsePathNodes</a></li><li><a href="global.html#parseTransform">parseTransform</a></li><li><a href="global.html#pointToHorizontalLine">pointToHorizontalLine</a></li><li><a href="global.html#pointToLineTo">pointToLineTo</a></li><li><a href="global.html#pointToMoveTo">pointToMoveTo</a></li><li><a href="global.html#pointToSmoothQuadraticBezier">pointToSmoothQuadraticBezier</a></li><li><a href="global.html#pointToVerticalLine">pointToVerticalLine</a></li><li><a href="global.html#pointsToArc">pointsToArc</a></li><li><a href="global.html#pointsToCubicBezier">pointsToCubicBezier</a></li><li><a href="global.html#pointsToPath">pointsToPath</a></li><li><a href="global.html#pointsToQuadraticBezier">pointsToQuadraticBezier</a></li><li><a href="global.html#pointsToSmoothCubicBezier">pointsToSmoothCubicBezier</a></li><li><a href="global.html#rectToPath">rectToPath</a></li><li><a href="global.html#relativeToAbsolute">relativeToAbsolute</a></li><li><a href="global.html#removeNodeFromPath">removeNodeFromPath</a></li><li><a href="global.html#rotateElement">rotateElement</a></li><li><a href="global.html#scaleElement">scaleElement</a></li><li><a href="global.html#serializeTransform">serializeTransform</a></li><li><a href="global.html#simplifyPath">simplifyPath</a></li><li><a href="global.html#svgToScreenCoords">svgToScreenCoords</a></li><li><a href="global.html#updateNodeInPath">updateNodeInPath</a></li><li><a href="global.html#useCoordinateTransformer">useCoordinateTransformer</a></li><li><a href="global.html#useHistory">useHistory</a></li><li><a href="global.html#useLocalStorage">useLocalStorage</a></li><li><a href="global.html#useMoveable">useMoveable</a></li><li><a href="global.html#usePanzoom">usePanzoom</a></li><li><a href="global.html#usePathDataProcessor">usePathDataProcessor</a></li><li><a href="global.html#usePerformance">usePerformance</a></li><li><a href="global.html#useSVGParser">useSVGParser</a></li><li><a href="global.html#useSVGStorage">useSVGStorage</a></li><li><a href="global.html#useSVGWorld">useSVGWorld</a></li><li><a href="global.html#useSessionStorage">useSessionStorage</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.5</a> on Mon Nov 17 2025 13:59:29 GMT+1300 (New Zealand Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
